extends ./layout.jade

block content
  .row(style='opacity: 1;')
    .propertyPage.col-xs-12
      .row.propertyDataRow
        #propertyCaption.col-xs-12
          = property.name
      
      .row
        .col-xs-12
          div
            // Nav tabs
            ul#tabs.nav.nav-tabs(role='tablist')
              li.active(role='presentation')
                a(href='#paymentsList', aria-controls='paymentsList', role='tab', data-toggle='tab')
                  | #{__('Payments')}(
                  span(class= property.payment > 0 ? 'paymentOK' : 'paymentNOK')
                    = property.payment
                    |&euro;
                  | )
                  
              li(role='presentation')
                a(href='#tenants', aria-controls='tenants', role='tab', data-toggle='tab') #{__('Rents')}
                  
              li(role='presentation')
                a(href='#issues', aria-controls='issues', role='tab', data-toggle='tab') #{__('Issues')} (5)
                  
              li(role='presentation')
                a(href='#photos', aria-controls='photos', role='tab', data-toggle='tab') #{__('Pictures')}
            // Tab panes
            .tab-content
              #paymentsList.tab-pane.active(role='tabpanel')
                table.table
                  tr
                    th(style='min-width: 200px;') #{__('Month')}
                    th(style='min-width: 200px;') #{__('Due')}
                    th(style='min-width: 200px;') #{__('Payed')}
                    th.align-right #{__('Payment')}
                    th(style='width: 100%')
                  for payment in payments
                    tr
                      td= payment.month
                      td= payment.dueDate
                      td= payment.payedDate
                      td(class= payment.payment > 0 ? 'align-right paymentOK' : 'align-right paymentNOK')
                        = payment.payment 
                        |&euro;
                      td.vAlign-center
                        if payment.payment < 0
                          a.reminderButton(href='#')
                            span.label.label-danger #{__('Send reminder')}
              #tenants.tab-pane(role='tabpanel')
                .actions.row
                  #addTenant.btn.btn-default Add contract
                table.table
                  tr
                    th
                    th #{__('Contract name')}
                    th #{__('Since')}
                    th #{__('Till')}
                    th #{__('Payment status')}
                  for tenant in tenants
                    tr.tenant
                      td
                        span.glyphicon.glyphicon-chevron-right
                      td= tenant.name
                      td= tenant.contractBegin
                      td= tenant.contractEnd
                      td= tenant.payment
                    tr.detailsRow
                      td(colspan='999')
                        .details
                          table
                            tr
                              td.tenantPicture
                                img(src=tenant.picture)
                            
                              td.vAlign-top.fields
                                .field
                                  .fieldName #{__('Age')}:
                                  .fieldValue= tenant.age
                                .field
                                  .fieldName #{__('Phone')}:
                                  .fieldValue= tenant.phone
              #issues.tab-pane(role='tabpanel')
                table.table
                  tr
                    th #{__('Problem')}
                    th #{__('Date')}
                  for issue in issues
                    tr(class= issue.status == 'new' ? 'issue newIssue' : 'issue')
                      td= issue.issueCaption
                      td= issue.creationDate
              #photos.tab-pane(role='tabpanel')
                .row.propertyDataRow
                  .col-xs-4
                    #propertyPicture
                      img(src=property.img)
    #addTenantDialog
      .addTenantDialogWrapper
        .addTenantDialogContainer
          .addTenantDialogData
            .addTenantDialogHeader
              .headerCaption
                h1 #{__('Add tenant')}
              #addTenantDialogClose.btn.btn-default.float-right(onclick='closePrestatieHistory();') #{__('Cancel')}
              #addTenantDialogSave.btn.btn-primary.float-right(onclick='closePrestatieHistory();') #{__('Save')}
            .container
              form
                .form-group
                  label(for='tenantName') #{__('Tenant name')}
                  input#tenantName.form-control(type='text', placeholder= __('Tenant name'))
                .form-group
                  label(for='birthDate') #{__('Birth date')}
                  input#birthDate.form-control(type='text', placeholder= __('Birth date'), data-date-format='dd/mm/yyyy', data-provide='datepicker')
                .form-group
                  label(for='phonenumber') #{__('Phone Number')}
                  input#phonenumber.form-control(type='text', placeholder= __('Phone Number'))
                .form-group
                  label(for='fromDate') #{__('Since')}
                  input#fromDate.form-control(type='text', placeholder= __('Since'), data-date-format='dd/mm/yyyy', data-provide='datepicker')
                .form-group
                  label(for='tillDate') #{__('Till')}
                  input#tillDate.form-control(type='text', placeholder= __('Till'), data-date-format='dd/mm/yyyy', data-provide='datepicker')
block scripts    
  script(type='text/javascript', src='/js/jquery.mask.min.js')
  script(type='text/javascript', src='/js/bootstrap-datepicker.min.js')
  script(type='text/javascript', src='/js/property.js')


